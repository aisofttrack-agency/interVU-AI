{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohdmeraaz08/Documents/interVU-AI/firebase/admin.ts"],"sourcesContent":["// ✅ Force Node runtime (PREVENTS Edge + Turbopack crash)\nexport const runtime = \"nodejs\";\n\nimport { initializeApp, getApps, cert } from \"firebase-admin/app\";\nimport { getAuth } from \"firebase-admin/auth\";\nimport { getFirestore } from \"firebase-admin/firestore\";\n\n// ✅ Initialize Firebase Admin SDK safely\nfunction initFirebaseAdmin() {\n  // Prevent double initialization during hot reload\n  if (!getApps().length) {\n    initializeApp({\n      credential: cert({\n        projectId: process.env.FIREBASE_PROJECT_ID as string,\n        clientEmail: process.env.FIREBASE_CLIENT_EMAIL as string,\n        privateKey: process.env.FIREBASE_PRIVATE_KEY\n          ?.replace(/\\\\n/g, \"\\n\")\n          .trim(),\n      }),\n    });\n  }\n\n  return {\n    auth: getAuth(),\n    db: getFirestore(),\n  };\n}\n\n// ✅ Export instances\nexport const { auth, db } = initFirebaseAdmin();\n"],"names":[],"mappings":"AAAA,yDAAyD;;;;;;;;;AAGzD;AACA;AACA;;;;;;;AAJO,MAAM,UAAU;;;;AAMvB,yCAAyC;AACzC,SAAS;IACP,kDAAkD;IAClD,IAAI,CAAC,IAAA,iPAAO,IAAG,MAAM,EAAE;QACrB,IAAA,uPAAa,EAAC;YACZ,YAAY,IAAA,8OAAI,EAAC;gBACf,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EACxC,QAAQ,QAAQ,MACjB;YACL;QACF;IACF;IAEA,OAAO;QACL,MAAM,IAAA,mPAAO;QACb,IAAI,IAAA,kQAAY;IAClB;AACF;AAGO,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohdmeraaz08/Documents/interVU-AI/lib/actions/auth.action.ts"],"sourcesContent":["\"use server\";\n\nimport { auth, db } from \"@/firebase/admin\";\nimport { cookies } from \"next/headers\";\n\n// Session duration (1 week)\nconst SESSION_DURATION = 60 * 60 * 24 * 7;\n\n// Set session cookie\nexport async function setSessionCookie(idToken: string) {\n  const cookieStore = await cookies();\n\n  // Create session cookie\n  const sessionCookie = await auth.createSessionCookie(idToken, {\n    expiresIn: SESSION_DURATION * 1000, // milliseconds\n  });\n\n  // Set cookie in the browser\n  cookieStore.set(\"session\", sessionCookie, {\n    maxAge: SESSION_DURATION,\n    httpOnly: true,\n    secure: process.env.NODE_ENV === \"production\",\n    path: \"/\",\n    sameSite: \"lax\",\n  });\n}\n\nexport async function signUp(params: SignUpParams) {\n  const { uid, name, email } = params;\n\n  try {\n    // check if user exists in db\n    const userRecord = await db.collection(\"users\").doc(uid).get();\n    if (userRecord.exists)\n      return {\n        success: false,\n        message: \"User already exists. Please sign in.\",\n      };\n\n    // save user to db\n    await db.collection(\"users\").doc(uid).set({\n      name,\n      email,\n      // profileURL,\n      // resumeURL,\n    });\n\n    return {\n      success: true,\n      message: \"Account created successfully. Please sign in.\",\n    };\n  } catch (error: any) {\n    console.error(\"Error creating user:\", error);\n\n    // Handle Firebase specific errors\n    if (error.code === \"auth/email-already-exists\") {\n      return {\n        success: false,\n        message: \"This email is already in use\",\n      };\n    }\n\n    return {\n      success: false,\n      message: \"Failed to create account. Please try again.\",\n    };\n  }\n}\n\nexport async function signIn(params: SignInParams) {\n  const { email, idToken } = params;\n\n  try {\n    const userRecord = await auth.getUserByEmail(email);\n    if (!userRecord)\n      return {\n        success: false,\n        message: \"User does not exist. Create an account.\",\n      };\n\n    await setSessionCookie(idToken);\n  } catch (error: any) {\n    console.log(\"\");\n\n    return {\n      success: false,\n      message: \"Failed to log into account. Please try again.\",\n    };\n  }\n}\n\n// Sign out user by clearing the session cookie\nexport async function signOut() {\n  const cookieStore = await cookies();\n\n  cookieStore.delete(\"session\");\n}\n\n// Get current user from session cookie\nexport async function getCurrentUser(): Promise<User | null> {\n  const cookieStore = await cookies();\n\n  const sessionCookie = cookieStore.get(\"session\")?.value;\n  if (!sessionCookie) return null;\n\n  try {\n    const decodedClaims = await auth.verifySessionCookie(sessionCookie, true);\n\n    // get user info from db\n    const userRecord = await db\n      .collection(\"users\")\n      .doc(decodedClaims.uid)\n      .get();\n    if (!userRecord.exists) return null;\n\n    return {\n      ...userRecord.data(),\n      id: userRecord.id,\n    } as User;\n  } catch (error) {\n    console.log(error);\n\n    // Invalid or expired session\n    return null;\n  }\n}\n\n// Check if user is authenticated\nexport async function isAuthenticated() {\n  const user = await getCurrentUser();\n  return !!user;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAEA;AACA;;;;;;;;;AAEA,4BAA4B;AAC5B,MAAM,mBAAmB,KAAK,KAAK,KAAK;AAGjC,eAAe,iBAAiB,OAAe;IACpD,MAAM,cAAc,MAAM,IAAA,wKAAO;IAEjC,wBAAwB;IACxB,MAAM,gBAAgB,MAAM,uJAAI,CAAC,mBAAmB,CAAC,SAAS;QAC5D,WAAW,mBAAmB;IAChC;IAEA,4BAA4B;IAC5B,YAAY,GAAG,CAAC,WAAW,eAAe;QACxC,QAAQ;QACR,UAAU;QACV,QAAQ,oDAAyB;QACjC,MAAM;QACN,UAAU;IACZ;AACF;AAEO,eAAe,OAAO,MAAoB;IAC/C,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;IAE7B,IAAI;QACF,6BAA6B;QAC7B,MAAM,aAAa,MAAM,qJAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG;QAC5D,IAAI,WAAW,MAAM,EACnB,OAAO;YACL,SAAS;YACT,SAAS;QACX;QAEF,kBAAkB;QAClB,MAAM,qJAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG,CAAC;YACxC;YACA;QAGF;QAEA,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,wBAAwB;QAEtC,kCAAkC;QAClC,IAAI,MAAM,IAAI,KAAK,6BAA6B;YAC9C,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;QAEA,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;AAEO,eAAe,OAAO,MAAoB;IAC/C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IAE3B,IAAI;QACF,MAAM,aAAa,MAAM,uJAAI,CAAC,cAAc,CAAC;QAC7C,IAAI,CAAC,YACH,OAAO;YACL,SAAS;YACT,SAAS;QACX;QAEF,MAAM,iBAAiB;IACzB,EAAE,OAAO,OAAY;QACnB,QAAQ,GAAG,CAAC;QAEZ,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,wKAAO;IAEjC,YAAY,MAAM,CAAC;AACrB;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,wKAAO;IAEjC,MAAM,gBAAgB,YAAY,GAAG,CAAC,YAAY;IAClD,IAAI,CAAC,eAAe,OAAO;IAE3B,IAAI;QACF,MAAM,gBAAgB,MAAM,uJAAI,CAAC,mBAAmB,CAAC,eAAe;QAEpE,wBAAwB;QACxB,MAAM,aAAa,MAAM,qJAAE,CACxB,UAAU,CAAC,SACX,GAAG,CAAC,cAAc,GAAG,EACrB,GAAG;QACN,IAAI,CAAC,WAAW,MAAM,EAAE,OAAO;QAE/B,OAAO;YACL,GAAG,WAAW,IAAI,EAAE;YACpB,IAAI,WAAW,EAAE;QACnB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC;QAEZ,6BAA6B;QAC7B,OAAO;IACT;AACF;AAGO,eAAe;IACpB,MAAM,OAAO,MAAM;IACnB,OAAO,CAAC,CAAC;AACX;;;IA1HsB;IAkBA;IA0CA;IAuBA;IAOA;IA6BA;;AAvHA,6QAAA;AAkBA,6QAAA;AA0CA,6QAAA;AAuBA,6QAAA;AAOA,6QAAA;AA6BA,6QAAA"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohdmeraaz08/Documents/interVU-AI/app/%28auth%29/layout.tsx"],"sourcesContent":["import { ReactNode } from \"react\";\nimport { redirect } from \"next/navigation\";\n\nimport { isAuthenticated } from \"@/lib/actions/auth.action\";\n\nconst AuthLayout = async ({ children }: { children: ReactNode }) => {\n  const isUserAuthenticated = await isAuthenticated();\n  if (isUserAuthenticated) redirect(\"/\");\n\n  return <div className=\"auth-layout\">{children}</div>;\n};\n\nexport default AuthLayout;\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAEA;;;;;;;;AAEA,MAAM,aAAa,OAAO,EAAE,QAAQ,EAA2B;IAC7D,MAAM,sBAAsB,MAAM,IAAA,iLAAe;IACjD,IAAI,qBAAqB,IAAA,+NAAQ,EAAC;IAElC,qBAAO,4QAAC;QAAI,WAAU;kBAAe;;;;;;AACvC;uCAEe"}}]
}